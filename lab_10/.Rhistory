library(janitor)
library(tidyverse)
library(sf)
library(leaflet)
gunshot_location <- read_rds("data/shot_spotter.rds") %>%
clean_names()
schools_location <- read_rds("data/washington_schools.rds") %>%
clean_names()
dc_schools <- read_rds("data/dc_school_days_2019.rds") %>%
clean_names()
dc_shapefile <- read_rds("data/washington_shapefile.rds") %>%
clean_names()
gunshots_schools_2019 <- dc_schools %>%
clean_names() %>%
filter(str_detect("school_open", school_status))
shooting_time <- gunshot_location %>%
clean_names() %>%
filter(year=="2019", hour>6, hour<16, type!="Gunshot_or_Firecracker")
shootings <- shooting_time %>%
clean_names() %>%
inner_join(school_open, by-"date")
gunshots_schools_2019 <- dc_schools %>%
clean_names() %>%
filter(str_detect("school_open", school_status))
shooting_time <- gunshot_location %>%
clean_names() %>%
filter(year=="2019", hour>6, hour<16, type!="Gunshot_or_Firecracker")
shootings <- shooting_time %>%
clean_names() %>%
inner_join(school_open, by="date")
gunshots_schools_2019 <- dc_schools %>%
clean_names() %>%
filter(str_detect("school_open", school_status))
shooting_time <- gunshot_location %>%
clean_names() %>%
filter(year=="2019", hour>6, hour<16, type!="Gunshot_or_Firecracker")
shootings <- shooting_time %>%
clean_names() %>%
inner_join("school_open", by="date")
library(janitor)
library(tidyverse)
library(sf)
library(leaflet)
gunshot_location <- read_rds("data/shot_spotter.rds") %>%
clean_names()
schools_location <- read_rds("data/washington_schools.rds") %>%
clean_names()
dc_schools <- read_rds("data/dc_school_days_2019.rds") %>%
clean_names()
dc_shapefile <- read_rds("data/washington_shapefile.rds") %>%
clean_names()
gunshots_schools_2019 <- dc_schools %>%
clean_names() %>%
filter(str_detect("school_open", school_status))
shooting_time <- gunshot_location %>%
clean_names() %>%
filter(year=="2019", hour>6, hour<16, type!="Gunshot_or_Firecracker")
shootings <- shooting_time %>%
clean_names() %>%
inner_join("school_open", by="date")
gunshots_schools_2019 <- dc_schools %>%
clean_names() %>%
filter(str_detect("school_open", school_status))
shooting_time <- gunshot_location %>%
clean_names() %>%
filter(year=="2019", hour>6, hour<16, type!="Gunshot_or_Firecracker")
shootings <- shooting_time %>%
clean_names() %>%
inner_join(school_open, by= "date")
View(shooting_time)
school_open <- gunshots_schools_2019 %>%
clean_names() %>%
filter(str_detect("school_open", school_status))
shooting_time <- gunshot_location %>%
clean_names() %>%
filter(year=="2019", hour>6, hour<16, type!="Gunshot_or_Firecracker")
shootings <- shooting_time %>%
clean_names() %>%
inner_join(school_open, by="date")
wash_schools_buffered <- schools_location %>%
mutate(geometry = st_buffer(geometry, dist=200))
exposed_schools <- wash_schools_buffered %>%
clean_names() %>%
st_join(shootings, left="FALSE")
View(exposed_schools)
gunshots_schools_2019 <- dc_schools %>%
clean_names() %>%
filter(str_detect("school_open", school_status))
shooting_time <- gunshot_location %>%
clean_names() %>%
filter(year=="2019", hour>6, hour<16, type!="Gunshot_or_Firecracker")
shootings <- shooting_time %>%
clean_names() %>%
inner_join(school_open, by= "date")
wash_schools_buffered <- schools_location %>%
mutate(geometry = st_buffer(geometry, dist=200))
exposed_schools <- wash_schools_buffered %>%
clean_names() %>%
st_join(shootings, left="FALSE") %>%
group_by(school_name) %>%
count() %>%
arrange(desc(n))
school_open <- gunshots_schools_2019 %>%
clean_names() %>%
filter(str_detect("school_open", school_status))
shooting_time <- gunshot_location %>%
clean_names() %>%
filter(year=="2019", hour>6, hour<16, type!="Gunshot_or_Firecracker")
shootings <- shooting_time %>%
clean_names() %>%
inner_join(school_open, by="date")
wash_schools_buffered <- schools_location %>%
mutate(geometry = st_buffer(geometry, dist=200))
View(exposed_schools)
exposed_schools <- wash_schools_buffered %>%
clean_names() %>%
st_join(shootings, left="FALSE")
View(wash_schools_buffered)
school_open <- gunshots_schools_2019 %>%
clean_names() %>%
filter(str_detect("school_open", school_status))
shooting_time <- gunshot_location %>%
clean_names() %>%
filter(year=="2019", hour>6, hour<16, type!="Gunshot_or_Firecracker")
shootings <- shooting_time %>%
clean_names() %>%
inner_join(school_open, by="date")
wash_schools_buffered <- schools_location %>%
mutate(geometry = st_bufer(geometry, dist=200))
school_open <- gunshots_schools_2019 %>%
clean_names() %>%
filter(str_detect("school_open", school_status))
shooting_time <- gunshot_location %>%
clean_names() %>%
filter(year=="2019", hour>6, hour<16, type!="Gunshot_or_Firecracker")
shootings <- shooting_time %>%
clean_names() %>%
inner_join(school_open, by="date")
wash_schools_buffered <- schools_location %>%
mutate(geometry = st_buffer(geometry, dist=200))
distinct_schools <- wash_schools_buffered %>%
clean_names() %>%
st_join(shootings, left="FALSE") %>%
distinct(school_name)
school_open <- gunshots_schools_2019 %>%
clean_names() %>%
filter(str_detect("school_open", school_status))
shooting_time <- gunshot_location %>%
clean_names() %>%
filter(year=="2019", hour>6, hour<16, type!="Gunshot_or_Firecracker")
shootings <- shooting_time %>%
clean_names() %>%
inner_join(school_open, by="date")
wash_schools_buffered <- schools_location %>%
mutate(geometry = st_buffer(geometry, dist=200))
top_school <- wash_schools_buffered %>%
clean_names() %>%
st_join(shootings, left="FALSE") %>%
filter(grepl("Ketcham ES", school_name))
